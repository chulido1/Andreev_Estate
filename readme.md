# Andreev Estate

Веб-приложение элитного агентства недвижимости с возможностью регистрации пользователей, авторизации, фильтрации объектов, добавления в избранное и административной панелью для управления данными.

---

## Функциональность

- Регистрация и авторизация пользователей
- Поддержка reCAPTCHA v2 на форме входа и регистрации
- Добавление объектов в «Избранное»
- Просмотр карточек объектов с фильтрами и пагинацией
- Форма обратной связи с отправкой писем через MailHog (без сохранения в БД)
- Личный кабинет клиента
- Административная панель (доступ только для `admin`)
  - Просмотр всех таблиц
  - Редактирование, добавление и удаление данных
  - Просмотр SQL-представлений

---

## Требования

- PHP 7.4+
- MySQL / phpMyAdmin
- Apache (например, XAMPP / OpenServer)
- Git
- MailHog (для тестирования отправки почты)
- Интернет (для работы Google reCAPTCHA)

---

## Установка и запуск

### 1. Клонировать репозиторий

```bash
git clone https://github.com/chulido1/andreev-estate.git
```

### 2. Импортировать базу данных

1. Открыть `phpMyAdmin`
2. Создать базу данных с именем `andreev_estate`
3. Импортировать файл `andreev_estate.sql` из корня проекта

### 3. Настроить подключение к БД

Убедитесь, что параметры подключения в PHP-файлах такие:

```php
$conn = new mysqli("localhost", "root", "", "andreev_estate");
```

### 4. Настроить MailHog

Для тестовой отправки писем (например, с формы обратной связи):

- Установите MailHog
- Запустите его: `mailhog`
- Откройте `http://localhost:8025` для просмотра писем

---

## Авторизация и доступ

- При регистрации создаются клиенты с ролью `client`
- Администратору назначается роль `admin` вручную в таблице `users`
- После входа:
  - `client` попадает в `personal-account.php`
  - `admin` попадает в `admin.php`

---

## Тестовые данные

**Тестовый администратор:**

- Логин: `admin`
- Пароль: `admin`

**Тестовый пользователь:**

- Логин: `123`
- Пароль: `123`

---

## Структура проекта

```
andreev-estate/
│
├── admin.php                  # Админ-панель
├── personal-account.php       # Личный кабинет
├── registration.php           # Регистрация
├── register-handler.php       # Обработка регистрации
├── login-handler.php          # Обработка входа (если отдельно)
├── feedback.php               # Форма обратной связи
├── index.php, objects.php...  # Основные страницы сайта
├── remove_favorite.php        # Удаление из избранного
├── /img/                      # Изображения
├── /css/                      # Стили
├── /sql/andreev_estate.sql    # Дамп базы данных
└── readme.md                  # Этот файл
```

---

